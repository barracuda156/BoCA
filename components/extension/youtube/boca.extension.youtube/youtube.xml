<VideoSite>
  <name>YouTube</name>
  <version>1.0</version>
  <decoder>ffmpeg-flv_audio-in</decoder>

  <script type="text/javascript">
    function canHandleURL(URL) {
      if (URL.toLowerCase().substr(0, 31) == "http://www.youtube.com/watch?v=")	return true;
      else									return false;
    }

    function getVideoURL(html) {
      return html.match(/"fmt_stream_map": "[0-9]+\|(.*?)\|/), (RegExp.$1).replace(/\\\//g, "/");
    }

    function queryMetadata(html) {
      var metadata = new Metadata();

      metadata.title	   = (html.match(/&lt;meta name="title" content="(.*?)"&gt;/), RegExp.$1);
      metadata.description = (html.match(/&lt;p id="eow-description"\s*&gt;(.*?)&lt;\/p&gt;/), RegExp.$1);

      metadata.date	   = (html.match(/&lt;span id="eow-date" class="watch-video-date"\s*&gt;\s*(.*?)\s*&lt;\/span&gt;/), RegExp.$1);
      metadata.thumbnail   = (html.match(/'VIDEO_HQ_THUMB': '(.*?)'/), RegExp.$1);

      metadata.uploader	   = (html.match(/'VIDEO_USERNAME': '(.*?)'/), RegExp.$1);

      return metadata;
    }
  </script>
</VideoSite>
