<VideoSite>
  <name>ClipFish.de</name>
  <version>1.0</version>
  <decoder>ffmpeg-flv_audio-in</decoder>

  <script type="text/javascript">
    function canHandleURL(URL) {
      if (URL.toLowerCase().match(/http:\/\/www.clipfish.de\/(.*\/)?video\/.*/)) return true;
      else									 return false;
    }

    function getVideoURL(html) {
      var devxml = downloadURL((html.match(/data: "(.*?)"/), RegExp.$1));

      return devxml.match(/&lt;filename&gt;(.*?)&lt;\/filename&gt;/), RegExp.$1;
    }

    function queryMetadata(html) {
      var metadata = new Metadata();

      var devxml = downloadURL((html.match(/data: "(.*?)"/), RegExp.$1));

      metadata.title	   = (devxml.match(/&lt;title&gt;&lt;!\[CDATA\[(.*?)\]\]&gt;&lt;\/title&gt;/) ? RegExp.$1 : null);
      metadata.description = (html.match(/Beschreibung: &lt;\/label&gt; &lt;span .*?&gt;(.*?)&lt;\/span&gt;/) ? RegExp.$1 : null);

      metadata.date	   = (html.match(/(?:Upload:|Jahr:) &lt;\/label&gt;(.*?)&lt;br \/&gt;/) ? RegExp.$1 : null);
      metadata.thumbnail   = (devxml.match(/&lt;imageurl&gt;(.*?)&lt;\/imageurl&gt;/) ? RegExp.$1 : null);

      metadata.uploader	   = (html.match(/von: &lt;\/span&gt;&lt;a .*?&gt;(.*?)&lt;\/a&gt;/) ? RegExp.$1 : null);

      return metadata;
    }
  </script>
</VideoSite>
